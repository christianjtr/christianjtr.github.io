---
import { getEntry } from 'astro:content';

import type { ContentDataEntryType } from '@app-types/Content';
import type { AboutMeData } from '@schemas/AboutMeSchema';
import { CONTENT } from '@app-types/Content';
import LanguageIcon from '@assets/svg/language.svg';
import SunIcon from '@assets/svg/sun.svg';
import MoonIcon from '@assets/svg/moon.svg';

const { lang } = Astro.params;

const entry = await getEntry(lang as ContentDataEntryType, `${lang}/${CONTENT.COMMON}`);
const { header } = (entry?.data as AboutMeData) || {};
---

<header>
    <div class="navbar-container">
        <div class="navbar">
            <div class="navbar-start">
                <a class="btn btn-link" href="/">
                    <img src="/src/assets/brand_logo.png" width="50" height="50" alt="Brand logo" aria-label="Brand logo" />
                </a>
            </div>
            <div class="navbar-center gap-20">
                {header.main_sections.map((section: any) => (
                    <a 
                        role="button"
                        class="navbar-link hover:text-primary" 
                        href={`#${section.anchorId}`}
                        aria-label={`Go to ${section.label}`}
                    >
                        {section.label}
                    </a>
                ))}
            </div>
            <div class="navbar-end gap-1">
                <div class="dropdown dropdown-end">
                    <div
                        tabindex="0"
                        role="button"
                        class="btn btn-ghost btn-circle"
                    >
                        <LanguageIcon class="h-6 w-6" />
                    </div>
                    <ul tabindex="0" class="dropdown-content menu dropdown-menu-content">
                        {header.languages.map((languange: any) => (
                            <li><a>{languange}</a></li>
                        ))}
                    </ul>
                </div>
                <button class="btn btn-ghost btn-circle">
                    <label class="swap swap-rotate">
                        <input type="checkbox" class="theme-controller" value="synthwave" />
                        <SunIcon />
                        <MoonIcon />
                    </label>
                </button>
            </div>
        </div>
    </div>
</header>

<style>
   @reference "@styles/global.css";

    header {
        @apply sticky top-0 z-50 transition-all duration-300;
    }

    .navbar-container {
        @apply w-full flex items-center justify-between bg-white/10 backdrop-blur-sm shadow-xs h-20 px-24;
    }

    .navbar-link {
        @apply text-xl no-underline font-semibold;
    }

    .dropdown-menu-content {
        @apply bg-base-300 rounded-box z-1 mt-1 p-2 shadow-sm;
    }
</style>
